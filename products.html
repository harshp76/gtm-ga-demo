<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>GTM & GA4 Demo — Products</title>

  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TN8LZMQK');</script>
<!-- End Google Tag Manager -->
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;padding:0 16px 40px;line-height:1.6}
    header{display:flex;gap:16px;align-items:center;flex-wrap:wrap;padding:16px 0;border-bottom:1px solid #eee}
    nav a{margin-right:12px;text-decoration:none}
    .product{border:1px solid #eee;border-radius:14px;padding:16px;margin:16px 0}
    .btn{padding:10px 14px;border:1px solid #ddd;border-radius:10px;cursor:pointer}
  </style>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TN8LZMQK"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <header>
    <strong>GTM & GA4 Demo</strong>
    <nav>
      <a href="index.html">Home</a>
      <a href="products.html">Products</a>
      <a href="thank-you.html">Thank You</a>
    </nav>
  </header>

  <main>
    <h1>Products</h1>

    <div class="product" data-id="SKU-1001" data-name="Demo Widget" data-price="19.99" data-currency="USD">
      <h2>Demo Widget — $19.99</h2>
      <button class="btn add">Add to Cart</button>
      <button class="btn buy">Buy Now</button>
    </div>

    <div class="product" data-id="SKU-1002" data-name="Pro Gadget" data-price="49.99" data-currency="USD">
      <h2>Pro Gadget — $49.99</h2>
      <button class="btn add">Add to Cart</button>
      <button class="btn buy">Buy Now</button>
    </div>
  </main>

  <script>
    function dlPush(evtName, el){
      const wrap = el.closest('.product');
      const item = {
        item_id: wrap.dataset.id,
        item_name: wrap.dataset.name,
        price: Number(wrap.dataset.price),
        currency: wrap.dataset.currency
      };
      window.dataLayer = window.dataLayer || [];
      dataLayer.push({ event: evtName, page: 'products', ...item });
    }

    document.querySelectorAll('.add').forEach(btn=>{
      btn.addEventListener('click', function(){
        dlPush('add_to_cart', this);
        alert('Event pushed: add_to_cart');
      });
    });

    document.querySelectorAll('.buy').forEach(btn=>{
      btn.addEventListener('click', function(){
        dlPush('begin_checkout', this);
        // simulate checkout → thank-you page
        setTimeout(function(){ window.location.href = 'thank-you.html'; }, 300);
      });
    });
  </script>
</body>
</html>
